{% extends 'base.html' %}

{% block content %}
<h1>{{ patient.name }} - Patient Details</h1>

{% if risk_score is not none %}
<div class="alert {% if risk_score > 0.5 %}alert-danger{% else %}alert-success{% endif %}">
    Health Risk Assessment: {{ (risk_score * 100)|round(2) }}% 
    {% if risk_score > 0.5 %}High Risk{% else %}Low Risk{% endif %}
</div>
{% endif %}

<div class="row">
    <div class="col-md-6">
        <h2>Patient Information</h2>
        <p><strong>Age:</strong> {{ patient.age }}</p>
        <p><strong>Gender:</strong> {{ patient.gender }}</p>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-6">
        <h2>Medical Records</h2>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Blood Pressure</th>
                    <th>Heart Rate</th>
                    <th>Weight</th>
                    <th>Height</th>
                </tr>
            </thead>
            <tbody>
                {% for record in medical_records %}
                <tr>
                    <td>{{ record.date }}</td>
                    <td>{{ record.blood_pressure }}</td>
                    <td>{{ record.heart_rate }}</td>
                    <td>{{ record.weight }}</td>
                    <td>{{ record.height }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="col-md-6">
        <h2>Lab Results</h2>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Cholesterol</th>
                    <th>Blood Sugar</th>
                    <th>Hemoglobin</th>
                </tr>
            </thead>
            <tbody>
                {% for result in lab_results %}
                <tr>
                    <td>{{ result.date }}</td>
                    <td>{{ result.cholesterol }}</td>
                    <td>{{ result.blood_sugar }}</td>
                    <td>{{ result.hemoglobin }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}